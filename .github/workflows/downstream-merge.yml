name: Gitflow
on: 
  # To create pull requests.
  push:
    branches:
      - master
      - staging
  # To merge pull requests if not possible during the push run. Remove if `auto-merge` is `false`.
  # pull_request_review:
  check_run:
    types: [completed]

jobs:
  build:
    name: Gitflow
    runs-on: ubuntu-latest
    steps:
    - uses: caseware/gitflow-action@b8acc93ad7f61782d04d6c977efd97aa38d4df42
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }} # The `GITHUB_TOKEN` secret.
        dev: develop # The `dev` branch.
        master: master # The `master` branch.
        release: staging
        master-target: develop
        release-target: develop
        label: gitflow # The pull request label.
        auto-merge: 'check_run' # If `true`, will try to automatically merge pull requests. Can also be set to `pull_request_review`, `check_run`, `push`, or a comma-separated combination of these values to only merge when handling the named events.
        require-merge: false # If an attempted merge fails, the action is considered to have failed.
